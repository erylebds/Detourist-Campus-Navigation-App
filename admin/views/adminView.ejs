<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Detourist Admin</title>
    <link rel="stylesheet" href="/css/admin-style.css">
</head>

<body>

    <div class="admin-layout">
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <img src="/assets/icons/logoD.png" alt="Detourist logo">
                <h2>Detourist</h2>
                <p>Admin Navigation</p>
            </div>

            <nav class="admin-nav">
                <form method="get" id="tabForm">
                </form>
                <button type="button"
                    class="<%= activeTab === 'announcements' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=announcements'">
                    <span class="icon">ğŸ””</span> Announcements
                </button>
                <button type="button"
                    class="<%= activeTab === 'rooms' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=rooms'">
                    <span class="icon">ğŸ«</span> Rooms
                </button>
                <button type="button"
                    class="<%= activeTab === 'routes' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=routes'">
                    <span class="icon">ğŸ§­</span> Routes
                </button>
                <button type="button"
                    class="<%= activeTab === 'account' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=account'">
                    <span class="icon">ğŸ‘¤</span> Account
                </button>
            </nav>
        </aside>

        <main class="admin-main">
            <div class="admin-topbar">
                <p>Logged in as: <strong>&nbsp;<%= adminUsername %></strong></p>
                <a class="logout-link" href="/admin/logout">Log Out</a>
            </div>

            <!-- Announcements Tab -->
            <section class="admin-tab <%= activeTab === 'announcements' ? 'active' : '' %>" id="tab-announcements">
                <%- include("announcements", { 
                    annMsg: annMsg,
                    announcements: announcements,
                    editAnnouncement: editAnnouncement
                }) %>
            </section>

            <!-- Rooms Tab -->
            <section class="admin-tab <%= activeTab === 'rooms' ? 'active' : '' %>" id="tab-rooms">
                <h1 class="section-title">Rooms</h1>
                <div class="card-box">
                    <p>Rooms management (to follow)</p>
                </div>
            </section>

            <!-- Routes Tab -->
            <section class="admin-tab <%= activeTab === 'routes' ? 'active' : '' %>" id="tab-routes">
                <h1 class="section-title">Routes</h1>
                <div class="card-box">
                    <p>Routes management (to follow)</p>
                </div>
            </section>

            <!-- Account Tab -->
            <section class="admin-tab <%= activeTab === 'account' ? 'active' : '' %>" id="tab-account">
                <h1 class="section-title">Account</h1>

                <% if (accError) { %>
                    <div class="msg-error"><%= accError %></div>
                <% } %>
                <% if (accMsg) { %>
                    <div class="msg-success"><%= accMsg %></div>
                <% } %>

                <div class="card-box account-info">
                    <h2>Account Information</h2>
                    <p><strong>Username:</strong> <%= currentAdmin.username %></p>
                    <p><strong>Email:</strong> <%= currentAdmin.email %></p>
                </div>

                <div class="card-box">
                    <h2>Change Password</h2>
                    <form method="POST" action="/admin/account/password">
                        <input type="hidden" name="form_type" value="password">

                        <label for="old_password">Enter Old Password:</label>
                        <input type="password" id="old_password" name="old_password" required>

                        <label for="new_password">Enter New Password:</label>
                        <input type="password" id="new_password" name="new_password" required>

                        <label for="new_password2">Enter Again New Password:</label>
                        <input type="password" id="new_password2" name="new_password2" required>

                        <button type="submit" class="btn-primary">Save</button>
                    </form>
                </div>

                <div class="card-box">
                    <h2>Change Username</h2>
                    <form method="POST" action="/admin/account/username">
                        <input type="hidden" name="form_type" value="username">

                        <label for="old_username">Enter Old Username:</label>
                        <input type="text" id="old_username" name="old_username" required>

                        <label for="new_username">Enter New Username:</label>
                        <input type="text" id="new_username" name="new_username" required>

                        <label for="cu_password">Enter Password:</label>
                        <input type="password" id="cu_password" name="cu_password" required>

                        <button type="submit" class="btn-primary">Save</button>
                    </form>
                </div>
            </section>

        </main>
    </div>

</body>

</html>
