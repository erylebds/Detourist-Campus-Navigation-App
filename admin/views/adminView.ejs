<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Detourist Admin</title>
    <link rel="stylesheet" href="/css/admin-style.css">

    <script src="/js/script.js"></script>
</head>

<body>

    <div class="admin-layout">
        
        <button id="hamburgerBtn" class="hamburger">&#9776;</button>
        <div id="sidebarOverlay"></div>

        <aside class="admin-sidebar">
            <div class="admin-logo">
                <img src="/assets/icons/logoD.png" alt="Detourist logo">
                <h2>Detourist</h2>
                <p>Admin Navigation</p>
            </div>

            <nav class="admin-nav">
                <form method="get" id="tabForm">
                </form>
                <button type="button"
                    class="<%= activeTab === 'announcements' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=announcements'">
                    <span class="icon">ğŸ””</span> Announcements
                </button>
                <button type="button"
                    class="<%= activeTab === 'rooms' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=rooms'">
                    <span class="icon">ğŸ«</span> Rooms
                </button>
                <button type="button"
                    class="<%= activeTab === 'routes' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=routes'">
                    <span class="icon">ğŸ§­</span> Routes
                </button>
                <button type="button"
                    class="<%= activeTab === 'account' ? 'active' : '' %>"
                    onclick="window.location.href='/admin?tab=account'">
                    <span class="icon">ğŸ‘¤</span> Account
                </button>
            </nav>
        </aside>

        <main class="admin-main">
            <div class="admin-topbar">
                <p>Logged in as: <strong>&nbsp;<%= adminUsername %></strong></p>
                <a class="logout-link" href="/admin/logout">Log Out</a>
            </div>

            <!-- Announcements Tab -->
            <section class="admin-tab <%= activeTab === 'announcements' ? 'active' : '' %>" id="tab-announcements">
                <%- include("announcements", { 
                    annMsg: annMsg,
                    announcements: announcements,
                    editAnnouncement: editAnnouncement
                }) %>
            </section>

            <!-- Rooms Tab -->
            <section class="admin-tab <%= activeTab === 'rooms' ? 'active' : '' %>" id="tab-rooms">
                <% if (typeof rooms !== 'undefined') { %>
                    <%- include("rooms", { rooms: rooms }) %>
                <% } else { %>
                    <p>Error loading rooms data.</p>
                <% } %>
            </section>

            <!-- Routes Tab -->
            <section class="admin-tab <%= activeTab === 'routes' ? 'active' : '' %>" id="tab-routes">
                <h1 class="section-title">Routes</h1>
                <div class="card-box">
                    <p>Routes management (to follow)</p>
                </div>
            </section>

            <!-- Account Tab -->
            <section class="admin-tab <%= activeTab === 'account' ? 'active' : '' %>" id="tab-account">
                <%- include("accounts", { 
                    accError: accError,
                    accMsg: accMsg,
                    currentAdmin: currentAdmin,
                    otherAdmins: otherAdmins
                }) %>
            </section>
    </body>
</html>